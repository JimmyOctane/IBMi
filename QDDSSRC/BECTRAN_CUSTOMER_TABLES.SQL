-- =====================================================================
-- Bectran Customer Data Tables
-- Based on XML structure from sql.sqlrpgle
-- =====================================================================

-- Main Customer Basic Info Table
CREATE OR REPLACE TABLE BECTRAN_CUSTOMER_BASIC (
    ACCOUNT_ID VARCHAR(50) NOT NULL,
    TRANSACTION_ID VARCHAR(50) NOT NULL,
    ADDRESS_LINE_ONE VARCHAR(100),
    ADDRESS_LINE_TWO VARCHAR(100),
    ANNUAL_SALES_RANGE VARCHAR(50),
    BECTRAN_CUSTOMER_ID VARCHAR(50),
    CITY VARCHAR(50),
    CONTACT_FIRST_NAME VARCHAR(50),
    CONTACT_LAST_NAME VARCHAR(50),
    CONTACT_PHONE VARCHAR(30),
    CONTACT_TITLE VARCHAR(50),
    COUNTRY_ID VARCHAR(10),
    CUSTOMER_DBA_NAME VARCHAR(100),
    CUSTOMER_LEGAL_NAME VARCHAR(100),
    DATE_CREATED_IN_BECTRAN DATE,
    DUNS_NUMBER VARCHAR(20),
    FAX VARCHAR(30),
    BUSINESS_EMAIL VARCHAR(100),
    FEDERAL_TAX_ID VARCHAR(20),
    NUM_OF_EMPLOYEE VARCHAR(50),
    PHONE VARCHAR(30),
    STATE VARCHAR(10),
    STATE_OF_INCORPORATION VARCHAR(10),
    STYLE_OF_BUSINESS VARCHAR(50),
    TYPE_OF_BUSINESS VARCHAR(20),
    YEAR_ESTABLISHED INTEGER,
    ZIP_CODE VARCHAR(10),
    CONTACT_EMAIL VARCHAR(100),
    CREATED_TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (ACCOUNT_ID, TRANSACTION_ID)
);

-- Tax Exempt Information Table
CREATE OR REPLACE TABLE BECTRAN_TAX_EXEMPT (
    TAX_EXEMPT_ID INTEGER GENERATED ALWAYS AS IDENTITY,
    ACCOUNT_ID VARCHAR(50) NOT NULL,
    TRANSACTION_ID VARCHAR(50) NOT NULL,
    CERT_NUM VARCHAR(50),
    STATE_CODE VARCHAR(10),
    EXPIRATION TIMESTAMP,
    HAS_EXPIRATION_DATE VARCHAR(3),
    DOC_IMAGE_URL VARCHAR(500),
    CREATED_TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (TAX_EXEMPT_ID),
    FOREIGN KEY (ACCOUNT_ID, TRANSACTION_ID) 
        REFERENCES BECTRAN_CUSTOMER_BASIC(ACCOUNT_ID, TRANSACTION_ID)
);

-- Owner/Officer Information Table
CREATE OR REPLACE TABLE BECTRAN_OWNER_OFFICER (
    OWNER_OFFICER_ID INTEGER GENERATED ALWAYS AS IDENTITY,
    ACCOUNT_ID VARCHAR(50) NOT NULL,
    TRANSACTION_ID VARCHAR(50) NOT NULL,
    SALUTATION VARCHAR(20),
    FIRST_NAME VARCHAR(50),
    LAST_NAME VARCHAR(50),
    PHONE VARCHAR(30),
    PERS_TITLE VARCHAR(50),
    SSN VARCHAR(20),
    DRIVERS_LICENCE VARCHAR(50),
    OWNER_PERCENTAGE DECIMAL(5,2),
    DATE_OF_BIRTH DATE,
    SPOUSE_NAME VARCHAR(100),
    SPOUSE_DRIVERS_LICENCE VARCHAR(50),
    SPOUSE_SSN VARCHAR(20),
    EMAIL VARCHAR(100),
    FAX VARCHAR(30),
    ADDRESS_LINE_ONE VARCHAR(100),
    ADDRESS_LINE_TWO VARCHAR(100),
    CITY VARCHAR(50),
    STATE VARCHAR(10),
    COUNTRY_ID VARCHAR(10),
    ZIP_CODE VARCHAR(10),
    CREATED_TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (OWNER_OFFICER_ID),
    FOREIGN KEY (ACCOUNT_ID, TRANSACTION_ID) 
        REFERENCES BECTRAN_CUSTOMER_BASIC(ACCOUNT_ID, TRANSACTION_ID)
);

-- Billing Information Table
CREATE OR REPLACE TABLE BECTRAN_BILLING_INFO (
    BILLING_INFO_ID INTEGER GENERATED ALWAYS AS IDENTITY,
    ACCOUNT_ID VARCHAR(50) NOT NULL,
    TRANSACTION_ID VARCHAR(50) NOT NULL,
    SALUTATION VARCHAR(20),
    FIRST_NAME VARCHAR(50),
    LAST_NAME VARCHAR(50),
    PHONE VARCHAR(30),
    EMAIL VARCHAR(100),
    FAX VARCHAR(30),
    ADDRESS_LINE_ONE VARCHAR(100),
    ADDRESS_LINE_TWO VARCHAR(100),
    CITY VARCHAR(50),
    STATE VARCHAR(10),
    COUNTRY_ID VARCHAR(10),
    ZIP_CODE VARCHAR(10),
    CREATED_TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (BILLING_INFO_ID),
    FOREIGN KEY (ACCOUNT_ID, TRANSACTION_ID) 
        REFERENCES BECTRAN_CUSTOMER_BASIC(ACCOUNT_ID, TRANSACTION_ID)
);

-- Shipping Information Table
CREATE OR REPLACE TABLE BECTRAN_SHIPPING_INFO (
    SHIPPING_INFO_ID INTEGER GENERATED ALWAYS AS IDENTITY,
    ACCOUNT_ID VARCHAR(50) NOT NULL,
    TRANSACTION_ID VARCHAR(50) NOT NULL,
    SHIPPING_LOCATION_NAME VARCHAR(100),
    SALUTATION VARCHAR(20),
    FIRST_NAME VARCHAR(50),
    LAST_NAME VARCHAR(50),
    PHONE VARCHAR(30),
    EMAIL VARCHAR(100),
    FAX VARCHAR(30),
    ADDRESS_LINE_ONE VARCHAR(100),
    ADDRESS_LINE_TWO VARCHAR(100),
    CITY VARCHAR(50),
    STATE VARCHAR(10),
    COUNTRY_ID VARCHAR(10),
    ZIP_CODE VARCHAR(10),
    CREATED_TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (SHIPPING_INFO_ID),
    FOREIGN KEY (ACCOUNT_ID, TRANSACTION_ID) 
        REFERENCES BECTRAN_CUSTOMER_BASIC(ACCOUNT_ID, TRANSACTION_ID)
);

-- Create indexes for better query performance
CREATE INDEX IDX_BECTRAN_CUSTOMER_ID ON BECTRAN_CUSTOMER_BASIC(BECTRAN_CUSTOMER_ID);
CREATE INDEX IDX_CUSTOMER_LEGAL_NAME ON BECTRAN_CUSTOMER_BASIC(CUSTOMER_LEGAL_NAME);
CREATE INDEX IDX_TAX_EXEMPT_ACCOUNT ON BECTRAN_TAX_EXEMPT(ACCOUNT_ID, TRANSACTION_ID);
CREATE INDEX IDX_OWNER_ACCOUNT ON BECTRAN_OWNER_OFFICER(ACCOUNT_ID, TRANSACTION_ID);
CREATE INDEX IDX_BILLING_ACCOUNT ON BECTRAN_BILLING_INFO(ACCOUNT_ID, TRANSACTION_ID);
CREATE INDEX IDX_SHIPPING_ACCOUNT ON BECTRAN_SHIPPING_INFO(ACCOUNT_ID, TRANSACTION_ID);

-- Add comments to tables
LABEL ON TABLE BECTRAN_CUSTOMER_BASIC IS 'Bectran Customer Basic Information';
LABEL ON TABLE BECTRAN_TAX_EXEMPT IS 'Bectran Customer Tax Exempt Information';
LABEL ON TABLE BECTRAN_OWNER_OFFICER IS 'Bectran Customer Owner/Officer Information';
LABEL ON TABLE BECTRAN_BILLING_INFO IS 'Bectran Customer Billing Information';
LABEL ON TABLE BECTRAN_SHIPPING_INFO IS 'Bectran Customer Shipping Information';
